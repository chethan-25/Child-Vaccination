{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NEHA SAI PRIYA\\\\Downloads\\\\Covid-Vaccine-Verification-Blockchain-main\\\\Covid-Vaccine-Verification-Blockchain-main\\\\FrontEnd_App\\\\src\\\\components\\\\AdminPanel.js\";\n// src/components/AdminPanel.js\nimport React, { Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass AdminPanel extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      hospitals: [],\n      loading: false,\n      error: null,\n      success: null\n    };\n    this.loadHospitals = async () => {\n      try {\n        this.setState({\n          loading: true,\n          error: null\n        });\n        const {\n          contract\n        } = this.props;\n        const filter = contract.filters.HospitalRegistered();\n        const events = await contract.queryFilter(filter, 0, 'latest');\n        const uniqueAddresses = [...new Set(events.map(e => e.args.hospital))];\n        const hospitals = await Promise.all(uniqueAddresses.map(async address => {\n          const data = await contract.hospitals(address);\n          const isAuthorized = await contract.authorizedHospitals(address);\n          return {\n            address,\n            name: data[0],\n            license: data[1],\n            contact: data[2],\n            isAuthorized\n          };\n        }));\n        this.setState({\n          hospitals,\n          loading: false\n        });\n      } catch (error) {\n        this.setState({\n          error: 'Error loading hospitals',\n          loading: false\n        });\n      }\n    };\n    this.toggleAuthorization = async (address, currentStatus) => {\n      try {\n        const {\n          contract\n        } = this.props;\n        const tx = await contract.setHospitalAuthorization(address, !currentStatus);\n        await tx.wait();\n        this.setState({\n          success: `Hospital ${address} is now ${!currentStatus ? 'authorized' : 'unauthorized'}.`\n        });\n        this.loadHospitals();\n      } catch (error) {\n        this.setState({\n          error: 'Failed to change authorization status'\n        });\n      }\n    };\n  }\n  componentDidMount() {\n    this.loadHospitals();\n  }\n  render() {\n    const {\n      hospitals,\n      loading,\n      error,\n      success\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"admin-panel\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDC51 Admin Panel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.props.onBack,\n        children: \"\\u2190 Back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 19\n      }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'green'\n        },\n        children: success\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this), hospitals.map((h, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"hospital-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: h.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"License: \", h.license]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Contact: \", h.contact]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Wallet: \", h.address]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Status: \", h.isAuthorized ? '‚úÖ Authorized' : '‚ùå Not Authorized']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => this.toggleAuthorization(h.address, h.isAuthorized),\n          children: h.isAuthorized ? 'Revoke' : 'Authorize'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default AdminPanel;","map":{"version":3,"names":["React","Component","jsxDEV","_jsxDEV","AdminPanel","constructor","args","state","hospitals","loading","error","success","loadHospitals","setState","contract","props","filter","filters","HospitalRegistered","events","queryFilter","uniqueAddresses","Set","map","e","hospital","Promise","all","address","data","isAuthorized","authorizedHospitals","name","license","contact","toggleAuthorization","currentStatus","tx","setHospitalAuthorization","wait","componentDidMount","render","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onBack","style","color","h","i"],"sources":["C:/Users/NEHA SAI PRIYA/Downloads/Covid-Vaccine-Verification-Blockchain-main/Covid-Vaccine-Verification-Blockchain-main/FrontEnd_App/src/components/AdminPanel.js"],"sourcesContent":["// src/components/AdminPanel.js\r\nimport React, { Component } from 'react';\r\n\r\nclass AdminPanel extends Component {\r\n  state = {\r\n    hospitals: [],\r\n    loading: false,\r\n    error: null,\r\n    success: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.loadHospitals();\r\n  }\r\n\r\n  loadHospitals = async () => {\r\n    try {\r\n      this.setState({ loading: true, error: null });\r\n      const { contract } = this.props;\r\n      const filter = contract.filters.HospitalRegistered();\r\n      const events = await contract.queryFilter(filter, 0, 'latest');\r\n\r\n      const uniqueAddresses = [...new Set(events.map(e => e.args.hospital))];\r\n\r\n      const hospitals = await Promise.all(uniqueAddresses.map(async (address) => {\r\n        const data = await contract.hospitals(address);\r\n        const isAuthorized = await contract.authorizedHospitals(address);\r\n        return {\r\n          address,\r\n          name: data[0],\r\n          license: data[1],\r\n          contact: data[2],\r\n          isAuthorized\r\n        };\r\n      }));\r\n\r\n      this.setState({ hospitals, loading: false });\r\n    } catch (error) {\r\n      this.setState({ error: 'Error loading hospitals', loading: false });\r\n    }\r\n  };\r\n\r\n  toggleAuthorization = async (address, currentStatus) => {\r\n    try {\r\n      const { contract } = this.props;\r\n      const tx = await contract.setHospitalAuthorization(address, !currentStatus);\r\n      await tx.wait();\r\n\r\n      this.setState({ success: `Hospital ${address} is now ${!currentStatus ? 'authorized' : 'unauthorized'}.` });\r\n      this.loadHospitals();\r\n    } catch (error) {\r\n      this.setState({ error: 'Failed to change authorization status' });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { hospitals, loading, error, success } = this.state;\r\n\r\n    return (\r\n      <div className=\"admin-panel\">\r\n        <h2>üëë Admin Panel</h2>\r\n        <button onClick={this.props.onBack}>‚Üê Back</button>\r\n\r\n        {loading && <p>Loading...</p>}\r\n        {error && <p style={{ color: 'red' }}>{error}</p>}\r\n        {success && <p style={{ color: 'green' }}>{success}</p>}\r\n\r\n        {hospitals.map((h, i) => (\r\n          <div key={i} className=\"hospital-card\">\r\n            <h4>{h.name}</h4>\r\n            <p>License: {h.license}</p>\r\n            <p>Contact: {h.contact}</p>\r\n            <p>Wallet: {h.address}</p>\r\n            <p>Status: {h.isAuthorized ? '‚úÖ Authorized' : '‚ùå Not Authorized'}</p>\r\n            <button onClick={() => this.toggleAuthorization(h.address, h.isAuthorized)}>\r\n              {h.isAuthorized ? 'Revoke' : 'Authorize'}\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AdminPanel;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}